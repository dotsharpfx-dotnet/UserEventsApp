# name: Release

# on:
#   push:
#     tags:
#       - 'v*'

# jobs:
#   release:
#     runs-on: ubuntu-latest

#     permissions:
#       contents: write
#       packages: write

#     steps:
#     - uses: actions/checkout@v4
#       with:
#         fetch-depth: 0

#     - name: Setup .NET
#       uses: actions/setup-dotnet@v4
#       with:
#         dotnet-version: '10.0.x'

#     - name: Get version from tag
#       id: tag_name
#       run: |
#         echo "VERSION=${GITHUB_REF#refs/tags/v}" >> $GITHUB_OUTPUT

#     - name: Restore dependencies
#       run: dotnet restore UserEventsApp.sln

#     - name: Build Release
#       run: |
#         dotnet build UserEventsApp.sln \
#           --configuration Release \
#           --no-restore \
#           -p:Version=${{ steps.tag_name.outputs.VERSION }}

#     - name: Run tests
#       run: dotnet test UserEventsApp.sln --configuration Release --no-build

#     - name: Publish Application
#       run: |
#         dotnet publish UserEventsApp/UserEvents.App/UserEvents.App.csproj \
#           --configuration Release \
#           --no-build \
#           --output ./publish \
#           -p:Version=${{ steps.tag_name.outputs.VERSION }}

#     - name: Create GitHub Release
#       uses: softprops/action-gh-release@v1
#       with:
#         files: ./publish/**/*
#         tag_name: v${{ steps.tag_name.outputs.VERSION }}
#         name: Release ${{ steps.tag_name.outputs.VERSION }}
#         draft: false
#         prerelease: false
#       env:
#         GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

#     - name: Publish to NuGet
#       run: |
#         dotnet pack UserEventsApp/UserEvents.Models/UserEvents.Models.csproj \
#           --configuration Release \
#           --no-build \
#           --output ./nupkg \
#           -p:Version=${{ steps.tag_name.outputs.VERSION }}
        
#         dotnet pack UserEventsApp/UserEvents.Infra/UserEvents.Infra.csproj \
#           --configuration Release \
#           --no-build \
#           --output ./nupkg \
#           -p:Version=${{ steps.tag_name.outputs.VERSION }}
#       continue-on-error: true
